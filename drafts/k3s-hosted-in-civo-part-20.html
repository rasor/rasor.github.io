
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="HandheldFriendly" content="True" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="robots" content="" />

  <link href="https://fonts.googleapis.com/css?family=Source+Code+Pro|Source+Sans+Pro:300,400,400i,700" rel="stylesheet">

    <link rel="stylesheet" type="text/css" href="https://rasor.github.io/theme/stylesheet/style.min.css">

  <link rel="stylesheet" type="text/css" href="https://rasor.github.io/theme/pygments/github.min.css">
  <link rel="stylesheet" type="text/css" href="https://rasor.github.io/theme/font-awesome/css/fontawesome.css">
  <link rel="stylesheet" type="text/css" href="https://rasor.github.io/theme/font-awesome/css/brands.css">
  <link rel="stylesheet" type="text/css" href="https://rasor.github.io/theme/font-awesome/css/solid.css">

    <link href="https://rasor.github.io/static/custom.css" rel="stylesheet">

    <link href="https://rasor.github.io/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Rasor's Tech Blog Atom">


    <link rel="shortcut icon" href="img/favicon.ico" type="image/x-icon">
    <link rel="icon" href="img/favicon.ico" type="image/x-icon">



<meta name="author" content="rasor" />
<meta name="description" content="This blog is part of a serie: Part 0.1: Install Docker Desktop on Windows 10 Home - including WSL Part 0.2: Install k8s using kind on Windows - including arkade Part 1.1: Run docker containers Part 1.2: Develop .NET docker images Part 1.3: Run containers in k8s …" />
<meta name="keywords" content="#k3s, #civo, #k8s">


<meta property="og:site_name" content="Rasor's Tech Blog"/>
<meta property="og:title" content="k3s hosted in Civo - Part 2.0"/>
<meta property="og:description" content="This blog is part of a serie: Part 0.1: Install Docker Desktop on Windows 10 Home - including WSL Part 0.2: Install k8s using kind on Windows - including arkade Part 1.1: Run docker containers Part 1.2: Develop .NET docker images Part 1.3: Run containers in k8s …"/>
<meta property="og:locale" content="en_US"/>
<meta property="og:url" content="https://rasor.github.io/drafts/k3s-hosted-in-civo-part-20.html"/>
<meta property="og:type" content="article"/>
<meta property="article:published_time" content="2020-11-02 00:00:00+01:00"/>
<meta property="article:modified_time" content=""/>
<meta property="article:author" content="https://rasor.github.io/author/rasor.html">
<meta property="article:section" content="DevOps"/>
<meta property="article:tag" content="#k3s"/>
<meta property="article:tag" content="#civo"/>
<meta property="article:tag" content="#k8s"/>
<meta property="og:image" content="//s.gravatar.com/avatar/5b6cf6c4e0fa216452dccc8158bf673f?s=120">

  <title>Rasor's Tech Blog &ndash; k3s hosted in Civo - Part 2.0</title>

</head>
<body>
  <aside>
    <div>
      <a href="https://rasor.github.io">
        <img src="//s.gravatar.com/avatar/5b6cf6c4e0fa216452dccc8158bf673f?s=120" alt="Rasor's Tech Blog" title="Rasor's Tech Blog">
      </a>
      <h1><a href="https://rasor.github.io">Rasor's Tech Blog</a></h1>

<p>... still playing with this Lego</p>
      <nav>
        <ul class="list">


            <li><a target="_blank" href="https://stackoverflow.com/users/750989/rasor" >StackOverflow</a></li>
            <li><a target="_blank" href="https://www.npmjs.com/~rasor" >npm</a></li>
            <li><a target="_blank" href="https://dock.io?r=sorenraarup:aaaaCSAu" >dock.io</a></li>
            <li><a target="_blank" href="https://keybase.io/rasor" >Keybase</a></li>
            <li><a target="_blank" href="https://stackoverflow.com/cv/rasor" >-- CV --</a></li>
            <li><a target="_blank" href="https://angel.co/rasor" >AngelList</a></li>
        </ul>
      </nav>

      <ul class="social">
          <li>
            <a  class="sc-twitter" href="https://twitter.com/rasor" target="_blank">
            <i class="fab fa-twitter">
            </i>
          </a></li>
          <li>
            <a  class="sc-linkedin" href="https://www.linkedin.com/in/rasor" target="_blank">
            <i class="fab fa-linkedin">
            </i>
          </a></li>
          <li>
            <a  class="sc-wordpress" href="https://rasor.wordpress.com" target="_blank">
            <i class="fab fa-wordpress">
            </i>
          </a></li>
          <li>
            <a  class="sc-github" href="https://github.com/rasor" target="_blank">
            <i class="fab fa-github">
            </i>
          </a></li>
          <li>
            <a  class="sc-bitbucket" href="https://bitbucket.org/rasor" target="_blank">
            <i class="fab fa-bitbucket">
            </i>
          </a></li>
          <li>
            <a  class="sc-rss" href="/feeds/all.atom.xml" target="_blank">
            <i class="fas fa-rss">
            </i>
          </a></li>
      </ul>
    </div>


  </aside>
  <main>

    <nav>
      <a href="https://rasor.github.io">    Home
</a>

      <a href="/archives.html">Archives</a>
      <a href="/categories.html">Categories</a>
      <a href="/tags.html">Tags</a>
      <a href="/sitemap.xml">Sitemap</a>

      <a href="https://rasor.github.io/feeds/all.atom.xml">    Atom
</a>

    </nav>

<article class="single">
  <header>
      
    <h1 id="k3s-hosted-in-civo-part-20">k3s hosted in Civo - Part 2.0</h1>
    <p>
          Posted on November 02, 2020 in <a href="https://rasor.github.io/category/devops.html">DevOps</a>

      </br>
    </p>
  </header>


  <div>
    <p>This blog is part of a serie:</p>
<ul>
<li><a href="https://rasor.github.io/docker-desktop-for-windows-on-wsl2-part-01.html">Part 0.1: Install Docker Desktop on Windows 10 Home - including WSL</a></li>
<li><a href="https://rasor.github.io/k8s-on-windows-devbox-part-02.html">Part 0.2: Install k8s using kind on Windows - including arkade</a></li>
<li><a href="https://rasor.github.io/run-docker-containers-part-11.html">Part 1.1: Run docker containers</a></li>
<li><a href="https://rasor.github.io/develop-net-docker-images-part-12.html">Part 1.2: Develop .NET docker images</a></li>
<li><a href="https://rasor.github.io/aspnet-core-with-k8s-hosting-part-13.html">Part 1.3: Run containers in k8s</a></li>
<li><a href="https://rasor.github.io/drafts/k3s-hosted-in-civo-part-20.html">Part 2.0: Deploy containers to Civo</a> (this blog)</li>
</ul>
<h2>Intro</h2>
<p><a href="https://www.civo.com/features">Civo</a> offers a hosted k3s cluster with an app market: <a href="https://github.com/civo/kubernetes-marketplace">civo/kubernetes-marketplace</a>, like Arkade.</p>
<p>At time of writing Civo k8s is in beta. You can <a href="https://www.civo.com/kube100">apply</a> for $70 monthly free service.</p>
<p>You can work with Civo from 
* Civo web via <a href="https://www.civo.com/account/kubernetes">https://www.civo.com/account/kubernetes</a>
* <a href="https://www.civo.com/learn/kubernetes-cluster-administration-using-civo-cli">Civo CLI</a> that you download from <a href="https://github.com/civo/cli/releases/tag/v0.6.39">Release v0.6.39 · civo/cli</a></p>
<p>From those you create a k8s cluster.<br>
Then you download the kubeconfig and continue work on that remote cluster via your local installed kubectl.  </p>
<h2>Prerequisites</h2>
<p>You must have <code>kubectl</code> installed.  </p>
<h2>Get started</h2>
<ul>
<li>First you <a href="https://github.com/civo/cli/releases/tag/v0.6.39">download civo cli</a> and save it into <code>C:\Program Files\Civo</code>.  </li>
<li>Next add that path to environment path.  </li>
<li>Test civo:</li>
</ul>
<div class="highlight"><pre><span></span><span class="c1"># is civo reachable?</span>
civo verision
<span class="c1"># Civo CLI v0.6.39</span>
</pre></div>


<p>Get <a href="https://www.civo.com/account/security">API key</a></p>
<div class="highlight"><pre><span></span><span class="c1"># save API key into civo CLI</span>
civo apikey add My_Api_Key DAb75oyqVeaE7BI6Aa74FaRSP0E2tMZXkDWLC9wNQdcpGfH51r
<span class="c1"># Saved the API Key DAb75oyqVeaE7BI6Aa74FaRSP0E2tMZXkDWLC9wNQdcpGfH51r as My_Api_Key</span>

<span class="c1"># Set the key as current</span>
civo apikey current My_Api_Key
<span class="c1"># The current API Key is now My_Api_Key</span>

<span class="c1"># help me create a cluster</span>
civo k8s create -h
<span class="c1"># create a cluster and wait for it to finish</span>
civo k8s create Cluster-1-just-dashboard --size<span class="o">=</span>g2.xsmall --nodes<span class="o">=</span><span class="m">1</span> --wait -a<span class="o">=</span>kubernetes-dashboard

<span class="c1"># print kube config for the created cluster</span>
civo k8s config Cluster-1-just-dashboard
<span class="c1"># apiVersion: v1</span>
<span class="c1"># clusters:</span>
<span class="c1"># - cluster:</span>
<span class="c1">#   name: cluster-1-just-dashboard</span>

<span class="c1"># save (or merge) the config into your kubeconfig</span>
civo k8s config Cluster-1-just-dashboard --save
<span class="c1"># Saved config to ~/.kube/config</span>

<span class="c1"># print nodes and apps in your cluster</span>
civo k8s show Cluster-1-just-dashboard
<span class="c1">#           ID : 18779094-3e4e-4db5-85d4-6294c5ffffff</span>
<span class="c1">#         Name : Cluster-1-just-dashboard</span>
<span class="c1">#        Nodes : 1</span>
<span class="c1">#         Size : g2.xsmall</span>
<span class="c1">#       Status : ACTIVE</span>
<span class="c1">#      Version : 1.18.6+k3s1</span>
<span class="c1"># API Endpoint : https://91.211.144.244:6443</span>
<span class="c1">#    Master IP : 91.211.144.244</span>
<span class="c1"># DNS A record : 18779094-3e4e-4db5-85d4-6294c5ffffff.k8s.civo.com</span>

<span class="c1"># Nodes:</span>
<span class="c1"># +------------------+----+--------+-----------+-----------+------+----------+</span>
<span class="c1"># | Name             | IP | Status | Size      | Cpu Cores | Ram  | SSD disk |</span>
<span class="c1"># +------------------+----+--------+-----------+-----------+------+----------+</span>
<span class="c1"># | kube-master-5cbc |    | ACTIVE | g2.xsmall |         1 | 1024 |       25 |</span>
<span class="c1"># +------------------+----+--------+-----------+-----------+------+----------+</span>
<span class="c1"># Applications:</span>
<span class="c1"># +----------------------+---------+-----------+------------+</span>
<span class="c1"># | Name                 | Version | Installed | Category   |</span>
<span class="c1"># +----------------------+---------+-----------+------------+</span>
<span class="c1"># | kubernetes-dashboard | v2.0.0  | true      | management |</span>
<span class="c1"># +----------------------+---------+-----------+------------+</span>
</pre></div>


<p>With the cluster up browse to<br>
https://www.civo.com/account/kubernetes/18779094-3e4e-4db5-85d4-6294c5ffffff<br>
and expand kubernetes-dashboard.
It will tell you howto connect:</p>
<div class="highlight"><pre><span></span><span class="c1"># Get login token</span>
kubectl -n kubernetes-dashboard describe secret admin-user-token <span class="p">|</span> grep ^token
<span class="c1"># get api access</span>
kubectl proxy

<span class="c1"># Open dashboard in browser</span>
start http://localhost:8001/api/v1/namespaces/kubernetes-dashboard/services/https:kubernetes-dashboard:/proxy/
<span class="c1"># Signin and paste token</span>
</pre></div>


<p>You can add more apps out of the box:  </p>
<div class="highlight"><pre><span></span><span class="c1"># Print the apps you can install</span>
civo k8s applications list
<span class="c1"># +---------------------------+------------------+--------------+-----------------+-----------------------------+</span>
<span class="c1"># | Name                      | Version          | Category     | Plans           | Dependencies                |</span>
<span class="c1"># +---------------------------+------------------+--------------+-----------------+-----------------------------+</span>
<span class="c1"># | argo                      | (default)        | ci_cd        |                 |                             |</span>
<span class="c1"># | cert-manager              | v1.0.2           | architecture |                 | Helm                        |</span>
<span class="c1"># | docker-registry           | ALPHA            | architecture |                 | Helm, cert-manager, Traefik |</span>
<span class="c1"># | dynamic-pv-scaler         | 0.1.0            | storage      |                 | prometheus-operator         |</span>
<span class="c1"># | Ghost                     | 3.35.5           | management   | 5GB, 10GB, 15GB | longhorn                    |</span>
<span class="c1"># | gitea                     | 1.12.5           | management   |                 |                             |</span>
<span class="c1"># | haproxy                   | 1.4.6            | architecture |                 |                             |</span>
<span class="c1"># | Helm                      | 2.16.5           | management   |                 |                             |</span>
<span class="c1"># | Jaeger-Operator           | 1.2.0            | monitoring   |                 |                             |</span>
<span class="c1"># | Jenkins                   | 2.190.1          | ci_cd        | 5GB, 10GB, 20GB | Longhorn                    |</span>
<span class="c1"># | keptn                     | 0.7.1            | ci_cd        |                 |                             |</span>
<span class="c1"># | kube-hunter               | latest           | security     |                 |                             |</span>
<span class="c1"># | kube-scan                 | v20.5            | security     |                 |                             |</span>
<span class="c1"># | KubeDB                    | v0.12.0-r1       | database     |                 | Longhorn                    |</span>
<span class="c1"># | Kubei                     | 1.0.7            | security     |                 |                             |</span>
<span class="c1"># | Kubeless                  | 1.0.5            | architecture |                 |                             |</span>
<span class="c1"># | kubernetes-dashboard      | v2.0.0           | management   |                 |                             |</span>
<span class="c1"># | Linkerd                   | Latest           | architecture |                 |                             |</span>
<span class="c1"># | loki-stack                | v0.41.2          | monitoring   |                 | prometheus-operator         |</span>
<span class="c1"># | Longhorn                  | 1.0.2            | storage      |                 |                             |</span>
<span class="c1"># | Maesh                     | Latest           | architecture |                 | Helm                        |</span>
<span class="c1"># | MariaDB                   | 10.4.7           | database     | 5GB, 10GB, 20GB | Longhorn                    |</span>
<span class="c1"># | metrics-server            | (default)        | architecture |                 |                             |</span>
<span class="c1"># | MinIO                     | 2019-08-29       | storage      | 5GB, 10GB, 20GB | Longhorn                    |</span>
<span class="c1"># | MongoDB                   | 4.2.0            | database     | 5GB, 10GB, 20GB | Longhorn                    |</span>
<span class="c1"># | Netdata                   | Latest           | monitoring   |                 | Helm                        |</span>
<span class="c1"># | Nginx                     | latest           | architecture |                 |                             |</span>
<span class="c1"># | OpenFaaS                  | 0.18.0           | architecture |                 | Helm                        |</span>
<span class="c1"># | permission-manager        | 1.6.0            | management   |                 |                             |</span>
<span class="c1"># | Polaris                   | 1.2.0            | security     |                 |                             |</span>
<span class="c1"># | Portainer                 | ce               | management   |                 |                             |</span>
<span class="c1"># | PostgreSQL                |             11.5 | database     | 5GB, 10GB, 20GB | Longhorn                    |</span>
<span class="c1"># | prometheus-operator       | 0.35.0           | monitoring   |                 |                             |</span>
<span class="c1"># | RabbitMQ                  | 3.8.8-management | architecture |                 |                             |</span>
<span class="c1"># | Rancher                   | v2.5.0           | management   |                 |                             |</span>
<span class="c1"># | Redis                     |              3.2 | database     |                 |                             |</span>
<span class="c1"># | sealed-secrets            | v0.12.4          | architecture |                 |                             |</span>
<span class="c1"># | Selenium                  | 3.141.59-r1      | ci_cd        |                 |                             |</span>
<span class="c1"># | system-upgrade-controller | v0.6.2           | architecture |                 |                             |</span>
<span class="c1"># | Tekton                    | v0.17.0          | ci_cd        |                 |                             |</span>
<span class="c1"># | Traefik                   | (default)        | architecture |                 |                             |</span>
<span class="c1"># | Traefik-v2                |              2.3 | architecture |                 |                             |</span>
<span class="c1"># | Wordpress                 | 5.5.1            | management   | 5GB, 10GB, 20GB | longhorn, mariadb:5GB       |</span>
<span class="c1"># +---------------------------+------------------+--------------+-----------------+-----------------------------+</span>

civo kubernetes applications add PostgreSQL --cluster<span class="o">=</span>Cluster-1-just-dashboard
<span class="c1"># You requested to add PostgreSQL but didn&#39;t select a plan. Please choose one... (5GB, 10GB, 20GB) [5GB]: 5GB</span>
<span class="c1"># Thank you, next time you could use &quot;PostgreSQL:5GB&quot; to choose automatically</span>
<span class="c1"># Added PostgreSQL 11.5 to Kubernetes cluster Cluster-1-just-dashboard</span>
</pre></div>


<p>And finally - tear down and stop costs:  </p>
<div class="highlight"><pre><span></span><span class="c1"># Delete cluster</span>
civo kubernetes remove Cluster-1-just-dashboard
<span class="c1"># The Kubernetes cluster called Cluster-1-just-dashboard with ID 18779094-3e4e-4db5-85d4-6294c5ffffff was deleted</span>
</pre></div>


<h2>Links</h2>
<ul>
<li>Learn<ul>
<li><a href="https://www.civo.com/learn">Learn</a></li>
<li><a href="https://www.civo.com/learn/civo-kubernetes-quick-start-guide">Civo Kubernetes Quick Start Guide</a></li>
<li><a href="https://www.civo.com/learn/kubernetes-cluster-administration-using-civo-cli">Kubernetes Cluster Administration Using Civo CLI</a></li>
<li><a href="https://www.civo.com/blog/k8s-vs-k3s">What’s the difference between k3s vs k8s</a></li>
</ul>
</li>
<li>Signup<ul>
<li>Apply: <a href="https://www.civo.com/kube100">Join the world’s first managed k3s Kubernetes service</a></li>
<li>Operate: <a href="https://www.civo.com/account">https://www.civo.com/account</a></li>
<li><a href="https://github.com/civo/kubernetes-marketplace">kubernetes-marketplace</a></li>
<li>Incidents: <a href="http://status.civo.com/">Civo Status</a></li>
<li>email: info@civo.com</li>
</ul>
</li>
<li>Deploy<ul>
<li><a href="https://www.civo.com/learn/deploy-openfaas-with-k3s-on-civo">Deploy OpenFaaS with k3s on Civo – Civo.com</a></li>
<li><a href="https://www.civo.com/learn/deploy-a-batch-monitoring-stack-with-prometheus-pushgateway">Deploy a Batch Monitoring Stack With Prometheus PushGateway – Civo.com</a></li>
</ul>
</li>
<li>Develop<ul>
<li><a href="https://www.civo.com/api">Civo Cloud API Documentation - Civo.com</a></li>
</ul>
</li>
<li>Rancher<ul>
<li><a href="https://k3s.io/">K3s: Lightweight Kubernetes</a></li>
<li>Persistent volumes: <a href="https://github.com/longhorn/longhorn">longhorn</a></li>
<li><a href="https://rancher.com/quick-start/">Quick Start</a></li>
<li>Training: <a href="https://rancher.com/kubernetes-master-class">Kubernetes Online Master Class Series</a><ul>
<li><a href="https://info.rancher.com/kubernetes-master-class-oct27-2020">Kubernetes Master Class: Cluster Monitoring with Prometheus, Grafana and Alertmanager in Rancher 2.5 - Oct 27</a></li>
</ul>
</li>
<li><a href="https://allthingsopen.6connex.com/event/ATO/en-us/?mcc=ato-day-8am#!/RancherBooth">All Things Open</a></li>
</ul>
</li>
<li>k8s<ul>
<li><a href="https://kubernetes.io/docs/reference/generated/kubectl/kubectl-commands">Kubectl Reference Docs</a></li>
</ul>
</li>
</ul>
<p>The End</p>
  </div>
  <div class="tag-cloud">
    <p>
      <a href="https://rasor.github.io/tag/k3s.html">#k3s</a>
      <a href="https://rasor.github.io/tag/civo.html">#civo</a>
      <a href="https://rasor.github.io/tag/k8s.html">#k8s</a>
    </p>
  </div>





</article>

    <footer>
<p>
  &copy; rasor 2017 - This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike 4.0 International License</a>
</p>
<p>    Built with <a href="http://getpelican.com" target="_blank">Pelican</a> using <a href="http://bit.ly/flex-pelican" target="_blank">Flex</a> theme
</p><p>
  <a rel="license"
     href="http://creativecommons.org/licenses/by-sa/4.0/"
     target="_blank">
    <img alt="Creative Commons License"
         title="Creative Commons License"
         style="border-width:0"
           src="https://i.creativecommons.org/l/by-sa/4.0/80x15.png"
         width="80"
         height="15"/>
  </a>
</p>    </footer>
  </main>




<script type="application/ld+json">
{
  "@context" : "http://schema.org",
  "@type" : "Blog",
  "name": " Rasor's Tech Blog ",
  "url" : "https://rasor.github.io",
  "image": "//s.gravatar.com/avatar/5b6cf6c4e0fa216452dccc8158bf673f?s=120",
  "description": ""
}
</script>

</body>
</html>