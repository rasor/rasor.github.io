
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="HandheldFriendly" content="True" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="robots" content="" />

  <link href='//fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,700,400italic' rel='stylesheet' type='text/css'>

    <link rel="stylesheet" type="text/css" href="https://rasor.github.io/theme/stylesheet/style.min.css">

  <link rel="stylesheet" type="text/css" href="https://rasor.github.io/theme/pygments/github.min.css">
  <link rel="stylesheet" type="text/css" href="https://rasor.github.io/theme/font-awesome/css/font-awesome.min.css">

    <link href="https://rasor.github.io/static/custom.css" rel="stylesheet">

    <link href="https://rasor.github.io/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Rasor's Tech Blog Atom">


    <link rel="shortcut icon" href="img/favicon.ico" type="image/x-icon">
    <link rel="icon" href="img/favicon.ico" type="image/x-icon">



<meta name="author" content="rasor" />
<meta name="description" content="A journey to IoT in GCP First you&#39;ll need an account. There is a free trial you get via GCP Free Tier. If your trial has expired, then sign up with another email. If you sign up outside EU, then you can change your account type from Business to Individual …" />
<meta name="keywords" content="#gcp">

<meta property="og:site_name" content="Rasor's Tech Blog"/>
<meta property="og:title" content="GCP IoT"/>
<meta property="og:description" content="A journey to IoT in GCP First you&#39;ll need an account. There is a free trial you get via GCP Free Tier. If your trial has expired, then sign up with another email. If you sign up outside EU, then you can change your account type from Business to Individual …"/>
<meta property="og:locale" content="en_US"/>
<meta property="og:url" content="https://rasor.github.io/drafts/gcp-iot.html"/>
<meta property="og:type" content="article"/>
<meta property="article:published_time" content="2099-01-01 00:00:00+01:00"/>
<meta property="article:modified_time" content=""/>
<meta property="article:author" content="https://rasor.github.io/author/rasor.html">
<meta property="article:section" content="misc"/>
<meta property="article:tag" content="#gcp"/>
<meta property="og:image" content="//s.gravatar.com/avatar/5b6cf6c4e0fa216452dccc8158bf673f?s=120">

  <title>Rasor's Tech Blog &ndash; GCP IoT</title>

</head>
<body>
  <aside>
    <div>
      <a href="https://rasor.github.io">
        <img src="//s.gravatar.com/avatar/5b6cf6c4e0fa216452dccc8158bf673f?s=120" alt="Rasor's Tech Blog" title="Rasor's Tech Blog">
      </a>
      <h1><a href="https://rasor.github.io">Rasor's Tech Blog</a></h1>

<p>... still playing with this Lego</p>
      <nav>
        <ul class="list">

          <li><a href="https://stackoverflow.com/users/750989/rasor" target="_blank">StackOverflow</a></li>
          <li><a href="https://www.npmjs.com/~rasor" target="_blank">npm</a></li>
          <li><a href="https://dock.io?r=sorenraarup:aaaaCSAu" target="_blank">dock.io</a></li>
          <li><a href="https://stackoverflow.com/cv/rasor" target="_blank">-- CV --</a></li>
          <li><a href="https://angel.co/rasor" target="_blank">AngelList</a></li>
        </ul>
      </nav>

      <ul class="social">
        <li><a class="sc-twitter" href="https://twitter.com/rasor" target="_blank"><i class="fa fa-twitter"></i></a></li>
        <li><a class="sc-linkedin" href="https://www.linkedin.com/in/rasor" target="_blank"><i class="fa fa-linkedin"></i></a></li>
        <li><a class="sc-wordpress" href="https://rasor.wordpress.com" target="_blank"><i class="fa fa-wordpress"></i></a></li>
        <li><a class="sc-github" href="https://github.com/rasor" target="_blank"><i class="fa fa-github"></i></a></li>
        <li><a class="sc-bitbucket" href="https://bitbucket.org/rasor" target="_blank"><i class="fa fa-bitbucket"></i></a></li>
        <li><a class="sc-rss" href="/feeds/all.atom.xml" target="_blank"><i class="fa fa-rss"></i></a></li>
      </ul>
    </div>


  </aside>
  <main>

    <nav>
      <a href="https://rasor.github.io">    Home
</a>

      <a href="/archives.html">Archives</a>
      <a href="/categories.html">Categories</a>
      <a href="/tags.html">Tags</a>
      <a href="/sitemap.xml">Sitemap</a>

      <a href="https://rasor.github.io/feeds/all.atom.xml">    Atom
</a>

    </nav>

<article class="single">
  <header>
      
    <h1 id="gcp-iot">GCP IoT</h1>
    <p>
          Posted on January 01, 2099 in <a href="https://rasor.github.io/category/misc.html">misc</a>

          </br>
    </p>
  </header>


  <div>
    <h1>A journey to IoT in GCP</h1>
<p>First you'll need an account. There is a free trial you get via <a href="https://cloud.google.com/free/">GCP Free Tier</a>.<br>
If your trial has expired, then sign up with another email.<br>
If you sign up outside EU, then you can change your account type from Business to Individual.<br>
You'll have to enter a credit card, but if you delete your resources after use and use smallest size, then you probably can't exceed your $300 credit for free in that trial year.<br>
If you want to get a cost estimate then use <a href="https://cloud.google.com/products/calculator/">GCP Pricing Calculator</a>.  </p>
<p>When signed up you'll enter the <a href="https://console.cloud.google.com/getting-started">GCP Getting Started</a> page.  </p>
<p>Ok, I'm in - I want to install the CLI <a href="https://cloud.google.com/sdk/#download">Cloud SDK</a>.<br>
On Windows it wants to install it here: <code>C:\Program Files (x86)\Google\Cloud SDK</code>.<br>
I already have Python installed, so I deselected "Bundled Python".<br>
After install it runs <code>gcloud init</code>, which wants you to login and connect to the initial created project (a resource pool).  </p>
<p>Some of the initial info I gat was:  </p>
<div class="highlight"><pre><span></span>Not setting default zone/region (this feature makes it easier to use
[gcloud compute] by setting an appropriate default value for the
--zone and --region flag).
See https://cloud.google.com/compute/docs/gcloud-compute section on how to set
default compute region and zone manually. If you would like [gcloud init] to be
able to do this for you the next time you run it, make sure the
Compute Engine API is enabled for your project on the
https://console.developers.google.com/apis page.

Created a default .boto configuration file at [C:\Users\userid\.boto]. See this file and
[https://cloud.google.com/storage/docs/gsutil/commands/config] for more
information about configuring Google Cloud Storage.

Run `gcloud help config` to learn how to change individual settings

This gcloud configuration is called [default]. You can create additional configurations if you work with multiple accounts and/or projects.
Run `gcloud topic configurations` to learn more.

Some things to try next:

* Run `gcloud --help` to see the Cloud Platform services you can interact with. And run `gcloud help COMMAND` to get help on any gcloud command.
* Run `gcloud topic -h` to learn about advanced features of the SDK like arg files and output formatting
</pre></div>


<p>You will also be be greeted with this page: <a href="https://cloud.google.com/sdk/auth_success">You are now authenticated with the Google Cloud SDK!</a>.  </p>
<p>Here is what I have now:  </p>
<div class="highlight"><pre><span></span>gcloud -v
<span class="c1"># Google Cloud SDK 222.0.0</span>
<span class="c1"># beta 2018.07.16</span>
<span class="c1"># bq 2.0.36 - BigQuery</span>
<span class="c1"># core 2018.10.19</span>
<span class="c1"># gsutil 4.34</span>

gcloud config list
<span class="c1"># [core]</span>
<span class="c1"># account = your@email.xx</span>
<span class="c1"># disable_usage_reporting = False</span>
<span class="c1"># project = central-run-123456</span>
<span class="c1"># Your active configuration is: [default]</span>

<span class="c1"># https://console.cloud.google.com/cloud-resource-manager</span>
gcloud projects list
<span class="c1"># PROJECT_ID          NAME              PROJECT_NUMBER</span>
<span class="c1"># central-run-123456  My First Project  1091175999999</span>
</pre></div>


<ul>
<li>More help with gcloud: <a href="https://cloud.google.com/sdk/docs/scripting-gcloud">Scripting gcloud commands</a></li>
</ul>
<h1>Functions</h1>
<ul>
<li><a href="https://cloud.google.com/functions/docs/quickstart#functions-prepare-environment-nodejs">Quickstart:  Cloud Functions</a></li>
</ul>
<h2>PreReq</h2>
<div class="highlight"><pre><span></span>gcloud components update
gcloud components install beta <span class="c1"># Node v8 and Python code</span>
</pre></div>


<ul>
<li>Npm devDependencies for Express apps: <a href="https://www.npmjs.com/package/google-cloud">google-cloud</a></li>
</ul>
<div class="highlight"><pre><span></span><span class="c1"># You need `Google Cloud Functions` enabled.  </span>
gcloud services <span class="nb">enable</span> cloudfunctions.googleapis.com
<span class="c1"># Default region</span>
gcloud config <span class="nb">set</span> functions/region europe-west1
gcloud config get-value functions/region
<span class="c1"># europe-west1</span>

<span class="c1"># Sample code:</span>
git clone https://github.com/GoogleCloudPlatform/nodejs-docs-samples.git
<span class="c1"># git clone https://github.com/GoogleCloudPlatform/python-docs-samples.git</span>
<span class="nb">cd</span> nodejs-docs-samples/functions/helloworld/

<span class="c1"># gcloud SDK: https://cloud.google.com/sdk/gcloud/reference/beta/functions/</span>

<span class="c1"># Deploy:</span>
gcloud functions deploy helloGET --runtime nodejs8 --trigger-http <span class="c1">#--region=europe-west1</span>
<span class="c1"># Print:</span>
gcloud functions describe helloGET
<span class="c1"># httpsTrigger:</span>
<span class="c1">#  url: https://us-central1-central-run-220517.cloudfunctions.net/helloGET</span>

start https://us-central1-central-run-220517.cloudfunctions.net/helloGET
<span class="c1"># Hello World</span>

<span class="c1"># O&amp;M:</span>
gcloud functions -h
<span class="c1"># Usage: gcloud functions [optional flags] &lt;group | command&gt;</span>
<span class="c1">#   group may be           event-types | logs | regions</span>
<span class="c1">#   command may be         call | delete | deploy | describe | list</span>

gcloud functions list
<span class="c1"># NAME      STATUS  TRIGGER       REGION</span>
<span class="c1"># helloGET  ACTIVE  HTTP Trigger  us-central1</span>

<span class="c1"># Delete:</span>
gcloud functions delete helloGET <span class="c1"># takes minutes...</span>
</pre></div>


<h1>IoT</h1>
<p>I want to connect some IoT devices to GCP. Here is an overview of the GCP services<br>
<a href="https://cloud.google.com/solutions/iot/"><img alt="iot.svg" src="https://cloud.google.com/images/solutions/iot/iot.svg"></a></p>
<p>You need <code>Cloud IoT API</code> enabled.  </p>
<div class="highlight"><pre><span></span>gcloud services <span class="nb">enable</span> cloudiot.googleapis.com
<span class="c1"># Operation &quot;operations/acf.f93e2f75-fe30-4b85-8253-4458ba5fffff&quot; finished successfully.</span>

<span class="c1"># https://console.cloud.google.com/apis/dashboard</span>
gcloud services list
<span class="c1"># NAME                              TITLE</span>
<span class="c1"># bigquery-json.googleapis.com      BigQuery API</span>
<span class="c1"># cloudapis.googleapis.com          Google Cloud APIs</span>
<span class="c1"># clouddebugger.googleapis.com      Stackdriver Debugger API</span>
<span class="c1"># cloudiot.googleapis.com           Cloud IoT API</span>
<span class="c1"># cloudtrace.googleapis.com         Stackdriver Trace API</span>
<span class="c1"># datastore.googleapis.com          Cloud Datastore API</span>
<span class="c1"># logging.googleapis.com            Stackdriver Logging API</span>
<span class="c1"># monitoring.googleapis.com         Stackdriver Monitoring API</span>
<span class="c1"># servicemanagement.googleapis.com  Service Management API</span>
<span class="c1"># serviceusage.googleapis.com       Service Usage API</span>
<span class="c1"># sql-component.googleapis.com      Cloud SQL</span>
<span class="c1"># storage-api.googleapis.com        Google Cloud Storage JSON API</span>
<span class="c1"># storage-component.googleapis.com  Google Cloud Storage</span>
</pre></div>


<p>Here are commands for the IoT API:<br>
<a href="https://developers.google.com/apis-explorer/#p/cloudiot/v1/">Google APIs Explorer - Cloud IoT API v1</a></p>
<p>Here are IoT tutorials: 
<a href="https://cloud.google.com/solutions/iot/">Google Cloud IoT - Solutions</a></p>
<p>From an ESP32 (and ESP8266?) device here is how you connect it to  <a href="https://mongoose-os.com/docs/mos/cloud/google.md#setup-google-iot-core">Mongoose OS - Reporting state to Google IoT Core</a>  </p>
<p>And here are Mongoose supported HW + firmware <a href="https://mongoose-os.com/docs/mos/userguide/devboards.md">Mongoose OS Documentation</a>  </p>
<h1>Links</h1>
<ul>
<li>Pricing<ul>
<li><a href="https://cloud.google.com/free/">GCP Free Tier</a></li>
<li><a href="https://cloud.google.com/products/calculator/">GCP Pricing Calculator</a></li>
</ul>
</li>
<li>Community<ul>
<li><a href="https://developers.google.com/events/">Google Events</a></li>
<li><a href="https://developers.google.com/experts/">Google Developers Experts</a></li>
</ul>
</li>
<li>
<p>Develop</p>
<ul>
<li><a href="https://cloud.google.com/sdk/docs/quickstart-windows">gcloud CLI (SDK) Quickstart for Windows</a></li>
<li>StackOverflow: <a href="https://stackoverflow.com/questions/tagged/gcloud">Newest gcloud Questions</a></li>
</ul>
</li>
<li>
<p>My blog I did not prepare for publish: <a href="https://github.com/rasor/rasor.github.io/blob/pelican/content/2017/GoogleOnboardCph2017.md">Google Onboard Cph 2017</a></p>
</li>
<li>.NET<ul>
<li><a href="https://cloud.google.com/tools/visual-studio/docs/quickstart">Quickstart - Cloud Tools for Visual Studio</a></li>
<li><a href="https://cloud.google.com/dotnet/docs/getting-started/hello-world">How to run Hello World with .NET</a></li>
</ul>
</li>
</ul>
<p>The End.</p>
  </div>
  <div class="tag-cloud">
    <p>
      <a href="https://rasor.github.io/tag/gcp.html">#gcp</a>
    </p>
  </div>



    <div class="addthis_relatedposts_inline">


</article>

    <footer>
<p>
  &copy; rasor 2017 - This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike 4.0 International License</a>
</p>
<p>    Powered by <a href="http://getpelican.com" target="_blank">Pelican</a> - <a href="https://github.com/alexandrevicenzi/flex" target="_blank">Flex</a> theme by <a href="http://alexandrevicenzi.com" target="_blank">Alexandre Vicenzi</a>
</p><p>
  <a rel="license"
     href="http://creativecommons.org/licenses/by-sa/4.0/"
     target="_blank">
    <img alt="Creative Commons License"
         title="Creative Commons License"
         style="border-width:0"
         src="https://i.creativecommons.org/l/by-sa/4.0/80x15.png"
         width="80"
         height="15"/>
  </a>
</p>    </footer>
  </main>




<script type="application/ld+json">
{
  "@context" : "http://schema.org",
  "@type" : "Blog",
  "name": " Rasor's Tech Blog ",
  "url" : "https://rasor.github.io",
  "image": "//s.gravatar.com/avatar/5b6cf6c4e0fa216452dccc8158bf673f?s=120",
  "description": ""
}
</script>

</body>
</html>