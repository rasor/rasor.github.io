
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="HandheldFriendly" content="True" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="robots" content="" />

  <link href='//fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,700,400italic' rel='stylesheet' type='text/css'>

    <link rel="stylesheet" type="text/css" href="https://rasor.github.io/theme/stylesheet/style.min.css">

  <link rel="stylesheet" type="text/css" href="https://rasor.github.io/theme/pygments/github.min.css">
  <link rel="stylesheet" type="text/css" href="https://rasor.github.io/theme/font-awesome/css/font-awesome.min.css">

    <link href="https://rasor.github.io/static/custom.css" rel="stylesheet">

    <link href="https://rasor.github.io/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Rasor's Tech Blog Atom">


    <link rel="shortcut icon" href="img/favicon.ico" type="image/x-icon">
    <link rel="icon" href="img/favicon.ico" type="image/x-icon">



<meta name="author" content="rasor" />
<meta name="description" content="Leaflet is JavaScript mapping library by Vladimir Agafonkin (@mourner). If you want to use it in Angluar then you can work with it Untyped Typed Using one of the components build on the types 1. Untyped Ionic sample using untyped leaflet: dreamhouse-mobile-ionic 2. The types Leaflet already have a @types …" />
<meta name="keywords" content="">

<meta property="og:site_name" content="Rasor's Tech Blog"/>
<meta property="og:title" content="Using Leaflet with Angular"/>
<meta property="og:description" content="Leaflet is JavaScript mapping library by Vladimir Agafonkin (@mourner). If you want to use it in Angluar then you can work with it Untyped Typed Using one of the components build on the types 1. Untyped Ionic sample using untyped leaflet: dreamhouse-mobile-ionic 2. The types Leaflet already have a @types …"/>
<meta property="og:locale" content="en_US"/>
<meta property="og:url" content="https://rasor.github.io/drafts/using-leaflet-with-angular.html"/>
<meta property="og:type" content="article"/>
<meta property="article:published_time" content="2099-01-01 00:00:00+01:00"/>
<meta property="article:modified_time" content=""/>
<meta property="article:author" content="https://rasor.github.io/author/rasor.html">
<meta property="article:section" content="misc"/>
<meta property="og:image" content="//s.gravatar.com/avatar/5b6cf6c4e0fa216452dccc8158bf673f?s=120">

  <title>Rasor's Tech Blog &ndash; Using Leaflet with Angular</title>

</head>
<body>
  <aside>
    <div>
      <a href="https://rasor.github.io">
        <img src="//s.gravatar.com/avatar/5b6cf6c4e0fa216452dccc8158bf673f?s=120" alt="Rasor's Tech Blog" title="Rasor's Tech Blog">
      </a>
      <h1><a href="https://rasor.github.io">Rasor's Tech Blog</a></h1>

<p>... still playing with this Lego</p>
      <nav>
        <ul class="list">

          <li><a href="https://stackoverflow.com/users/750989/rasor" target="_blank">StackOverflow</a></li>
          <li><a href="https://www.npmjs.com/~rasor" target="_blank">npm</a></li>
          <li><a href="https://dock.io?r=sorenraarup:aaaaCSAu" target="_blank">dock.io</a></li>
          <li><a href="https://stackoverflow.com/cv/rasor" target="_blank">-- CV --</a></li>
          <li><a href="https://angel.co/rasor" target="_blank">AngelList</a></li>
        </ul>
      </nav>

      <ul class="social">
        <li><a class="sc-twitter" href="https://twitter.com/rasor" target="_blank"><i class="fa fa-twitter"></i></a></li>
        <li><a class="sc-linkedin" href="https://www.linkedin.com/in/rasor" target="_blank"><i class="fa fa-linkedin"></i></a></li>
        <li><a class="sc-wordpress" href="https://rasor.wordpress.com" target="_blank"><i class="fa fa-wordpress"></i></a></li>
        <li><a class="sc-github" href="https://github.com/rasor" target="_blank"><i class="fa fa-github"></i></a></li>
        <li><a class="sc-bitbucket" href="https://bitbucket.org/rasor" target="_blank"><i class="fa fa-bitbucket"></i></a></li>
        <li><a class="sc-rss" href="/feeds/all.atom.xml" target="_blank"><i class="fa fa-rss"></i></a></li>
      </ul>
    </div>


  </aside>
  <main>

    <nav>
      <a href="https://rasor.github.io">    Home
</a>

      <a href="/archives.html">Archives</a>
      <a href="/categories.html">Categories</a>
      <a href="/tags.html">Tags</a>
      <a href="/sitemap.xml">Sitemap</a>

      <a href="https://rasor.github.io/feeds/all.atom.xml">    Atom
</a>

    </nav>

<article class="single">
  <header>
      
    <h1 id="using-leaflet-with-angular">Using Leaflet with Angular</h1>
    <p>
          Posted on January 01, 2099 in <a href="https://rasor.github.io/category/misc.html">misc</a>

          </br>
    </p>
  </header>


  <div>
    <p><a href="http://leafletjs.com/">Leaflet</a> is JavaScript mapping library by <a href="https://twitter.com/mourner">Vladimir Agafonkin (@mourner)</a>.</p>
<p>If you want to use it in Angluar then you can work with it</p>
<ol>
<li>Untyped </li>
<li>Typed</li>
<li>Using one of the components build on the types</li>
</ol>
<h3>1. Untyped</h3>
<p>Ionic sample using untyped leaflet: <a href="https://github.com/dreamhouseapp/dreamhouse-mobile-ionic/blob/master/src/pages/property-list/property-list.ts">dreamhouse-mobile-ionic</a></p>
<h3>2. The types</h3>
<p>Leaflet already have a <a href="https://www.npmjs.com/package/@types/leaflet">@types/leaflet</a>-file.<br>
You can start working on them.
Then you can use the samples shown on the Leaflet website. </p>
<p>Package.json</p>
<div class="highlight"><pre><span></span>  <span class="s2">&quot;dependencies&quot;</span><span class="err">:</span> <span class="p">{</span>
    <span class="nt">&quot;leaflet&quot;</span><span class="p">:</span> <span class="s2">&quot;^1.2.0&quot;</span><span class="p">,</span>
    <span class="nt">&quot;@types/leaflet&quot;</span><span class="p">:</span> <span class="s2">&quot;^1.2.0&quot;</span><span class="p">,</span>
</pre></div>


<p>some-page.html</p>
<div class="highlight"><pre><span></span>    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">style</span><span class="o">=</span><span class="s">&quot;height:100%;&quot;</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;map&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</pre></div>


<p>some-page.ts</p>
<div class="highlight"><pre><span></span><span class="kr">import</span> <span class="nx">leaflet</span> <span class="nx">from</span> <span class="s1">&#39;leaflet&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="o">*</span> <span class="kr">as</span> <span class="nx">L</span> <span class="nx">from</span> <span class="s1">&#39;leaflet&#39;</span><span class="p">;</span>

<span class="kd">@Component</span><span class="p">({})</span>
<span class="kr">export</span> <span class="kr">class</span> <span class="nx">TabMapPage</span> <span class="kr">implements</span> <span class="nx">OnInit</span> <span class="p">{</span>
  <span class="nx">map</span>: <span class="kt">L.Map</span><span class="p">;</span>
  <span class="nx">mapDefaults</span>: <span class="kt">L.TileLayerOptions</span> <span class="o">=</span> <span class="p">{};</span>

  <span class="kr">public</span> <span class="nx">ngOnInit() {</span>
      <span class="kd">var</span> <span class="nx">mapOpts</span>: <span class="kt">L.MapOptions</span> <span class="o">=</span> <span class="p">{};</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">map</span> <span class="o">=</span> <span class="nx">L</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="s2">&quot;map&quot;</span><span class="p">,</span> <span class="nx">mapOpts</span><span class="p">);</span>
      <span class="nx">leaflet</span><span class="p">.</span><span class="nx">tileLayer</span><span class="p">(</span>
        <span class="s1">&#39;http://server.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer/tile/{z}/{y}/{x}&#39;</span><span class="p">,</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">mapDefaults</span><span class="p">)</span>
      <span class="p">.</span><span class="nx">addTo</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">map</span><span class="p">);</span>
  <span class="p">};</span>
</pre></div>


<p>Typed leaflet gives a problem with untyped leaflet plugins extending L. Luckily there is a <a href="https://github.com/yagajs/leaflet-ng2#use-standard-leaflet-plugins">fix for that</a>.</p>
<p>Using an untyped Leaflet plugin<br>
(in this case <a href="https://www.npmjs.com/package/leaflet.icon.glyph">Leaflet.Icon.Glyph</a>)<br>
Notice <code>(L as any).</code> to make L untyped in this place where we use <code>glypth()</code>, that leaflet don't know.</p>
<p>some-page.ts</p>
<div class="highlight"><pre><span></span>        <span class="kd">var</span> <span class="nx">markerOpts</span>: <span class="kt">L.MarkerOptions</span> <span class="o">=</span> <span class="p">{</span>
          <span class="nx">icon</span><span class="o">:</span> <span class="p">(</span><span class="nx">L</span> <span class="kr">as</span> <span class="nx">any</span><span class="p">).</span><span class="nx">icon</span><span class="p">.</span><span class="nx">glyph</span><span class="p">({</span>
            <span class="nx">prefix</span><span class="o">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
            <span class="nx">glyph</span><span class="o">:</span> <span class="s1">&#39;A&#39;</span>
          <span class="p">})</span>
        <span class="p">};</span>
</pre></div>


<h3>3. The Components</h3>
<p>A lot of <a href="https://www.npmjs.com/browse/depended/@types/leaflet">solutions are already using the @types</a>.  </p>
<p>I found two interesting components
A. ngx.leaflet.components
B. leaflet-ng2</p>
<h4>3A. <a href="https://www.npmjs.com/package/ngx.leaflet.components">ngx.leaflet.components</a></h4>
<p>It has many example sites using code in <a href="https://github.com/elasticrash/Angular.io.MapViewer">Angular.io.MapViewer</a></p>
<p>It has a starter template <a href="https://github.com/haoliangyu/ngx-leaflet-starter">ngx-leaflet-starter</a></p>
<p>Usage: See <a href="https://github.com/elasticrash/ngx.leaflet.component/wiki">Wiki</a></p>
<p>API <a href="https://elasticrash.github.io/Angular.io.MapViewer/documentation/components/LeafletElement.html">ngx.leaflet.components documentation</a></p>
<h4>3B. <a href="https://www.npmjs.com/package/@yaga/leaflet-ng2">leaflet-ng2</a></h4>
<p>It seems you can do anything with the leaflet-ng2 component. There is a lot of documentation.<br>
It is updated to latest leaflet 1.2.0 and latest Angular 4.4.
Perhaps it is best to start off from <a href="https://github.com/yagajs/leaflet-ng2">github</a></p>
<p><img alt="Directive structure" src="https://raw.githubusercontent.com/yagajs/leaflet-ng2/develop/directive-structure.svg" title="leaflet-ng2 structure"></p>
<p>It has comprehensive <a href="https://leaflet-ng2.yagajs.org/1.0.0-rc8/typedoc/">API documentation</a>.<br>
Notice - there might be a newer version - check root of url.</p>
<p>It is explained <a href="https://github.com/yagajs/leaflet-ng2#use-standard-leaflet-plugins">howto use Leaflet Plugins</a></p>
<p>leaflet-ng2 also has a starter template  <a href="https://github.com/yagajs/ionic2-starter-leaflet-ng2">ionic2-starter-leaflet-ng2</a>  </p>
<p>And a lot of <a href="https://leaflet-ng2.yagajs.org/latest/examples/">Examples</a></p>
<h1>Links</h1>
<ul>
<li><a href="https://github.com/Leaflet/Leaflet.VectorGrid">Leaflet.VectorGrid</a> - used by ngx-leaflet-starter</li>
<li><a href="http://ionicframework.com/docs/developer-resources/third-party-libs/#type-definitions">3rd party libs</a></li>
<li><a href="https://blogs.msdn.microsoft.com/typescript/2016/06/15/the-future-of-declaration-files/">The Future of Declaration Files</a></li>
<li><a href="http://microsoft.github.io/TypeSearch/">TypeScript Types Search</a></li>
</ul>
<h2>Other links</h2>
<ul>
<li><a href="https://www.mapbox.com/">Mapbox</a></li>
<li><a href="https://www.mapbox.com/unity/">Maps for Unity</a></li>
</ul>
<p>The End</p>
  </div>
  <div class="tag-cloud">
    <p>
    </p>
  </div>



    <div class="addthis_relatedposts_inline">


</article>

    <footer>
<p>
  &copy; rasor 2017 - This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike 4.0 International License</a>
</p>
<p>    Powered by <a href="http://getpelican.com" target="_blank">Pelican</a> - <a href="https://github.com/alexandrevicenzi/flex" target="_blank">Flex</a> theme by <a href="http://alexandrevicenzi.com" target="_blank">Alexandre Vicenzi</a>
</p><p>
  <a rel="license"
     href="http://creativecommons.org/licenses/by-sa/4.0/"
     target="_blank">
    <img alt="Creative Commons License"
         title="Creative Commons License"
         style="border-width:0"
         src="https://i.creativecommons.org/l/by-sa/4.0/80x15.png"
         width="80"
         height="15"/>
  </a>
</p>    </footer>
  </main>




<script type="application/ld+json">
{
  "@context" : "http://schema.org",
  "@type" : "Blog",
  "name": " Rasor's Tech Blog ",
  "url" : "https://rasor.github.io",
  "image": "//s.gravatar.com/avatar/5b6cf6c4e0fa216452dccc8158bf673f?s=120",
  "description": ""
}
</script>

</body>
</html>